<!DOCTYPE html>
<html>
<head>
    <title>Simple Map</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <!--<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true&libraries=places,geometry"></script>-->
    <!--<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>-->
    <script src="https://code.jquery.com/jquery-1.7.min.js"></script>
    <script src="https://code.jquery.com/ui/1.7.0/jquery-ui.js"></script>
    <script src="JS/NavigationControls.js" ></script>
    <script src="JS/TiledImageFiles.js" ></script>
    <script src="JS/WeatherFunctions.js"></script>    
    <link rel="stylesheet" type="text/css" href="CSS/MappingPage.css" />
    <!--Autocomplete Specific-->
    
    <script type="text/javascript" src="js/jquery.autocomplete.min.js"></script>
    <script type="text/javascript" src="js/Points-autocomplete.js" ></script>
    <link rel="stylesheet" type="text/css" href="CSS/style.css" /> 
</head>
<body>
  <!--Autocomplete-->
  <!--Autocomplete-->  
    <script>
        var map;
        var marker;
        var infowindow;
        var myLatLng;
        var KMLAdded;
        var CurrentZoom = 10;
        var BaseLatMarker = 42.93708;
        var BaseLngMarker = -75.6107;
        var CurrentLat = 29.376639;
        var CurrentLng = -95.097300;
function initMap() {
    var map = new google.maps.Map(document.getElementById('map'), {
        center: { lat: CurrentLat, lng: CurrentLng },
        zoom: CurrentZoom,
        mapTypeId: 'satellite'
    });
    infoWindow = new google.maps.InfoWindow({ map: map });

    myLatLng = { lat: BaseLatMarker, lng: BaseLngMarker };

    
    contentString = "TEST 1";
    infowindow = new google.maps.InfoWindow({
        content: contentString
    });
    var image = 'images/gpsloc.png';
    marker = new google.maps.Marker({
        position: myLatLng,
        //icon: image,
        map: map,
        title: 'Hello World!',
        mapTypeControl: true,
        mapTypeControlOptions: {
            //style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,
            position: google.maps.ControlPosition.BOTTOM_CENTER 
        },
        zoomControl: true,
        zoomControlOptions: {
            position: google.maps.ControlPosition.BOTTOM_LEFT
        },
        scaleControl: true,
        streetViewControl: true,
        streetViewControlOptions: {
            position: google.maps.ControlPosition.BOTTOM_LEFT
        },
        fullscreenControl: true
    });
    infowindow.close();
    
    //infowindow.open(map, marker);

    // Try HTML5 geolocation.
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function (position) {
            var pos = {
                lat: position.coords.latitude,
                lng: position.coords.longitude
            };
            navigator.geolocation.watchPosition
            var image;// = 'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png';
            image = "Images/gpsloc.png";
            image = "images/gpslocSmaller.png";
            var myLatLng = { lat: BaseLatMarker, lng: BaseLngMarker };
            var marker = new google.maps.Marker({
                position: myLatLng,
                map: map,
                icon: image,
                title: 'Current Position'
            });
            marker.setPosition(pos);
            marker.setMap(map);
            //infoWindow.setPosition(pos);
            //infoWindow.setContent('Location found.');            
            
            //map.setCenter(pos);
        }, function () {
            handleLocationError(true, infoWindow, map.getCenter());
        });
    } else {
        // Browser doesn't support Geolocation
        handleLocationError(false, infoWindow, map.getCenter());
    }
    //TestAjax();
    var centerControlDiv = document.createElement('div');
    var centerControl = new CenterControl(centerControlDiv, map);

    centerControlDiv.index = 1;
    map.controls[google.maps.ControlPosition.TOP_RIGHT].push(centerControlDiv);

    AddTiling(map);
    KMLAdded = false;
    AddKML(map);

    SetMarkerMain(BaseLatMarker, BaseLngMarker, 'test');
    
    
}

function handleLocationError(browserHasGeolocation, infoWindow, pos) {
    infoWindow.setPosition(pos);
    infoWindow.setContent(browserHasGeolocation ?
                          'Error: The Geolocation service failed.' :
                          'Error: Your browser doesn\'t support geolocation.');
}

function ErrorFunction(e) {
    alert(e);
}
function MoveToPosition(Lat, Lng)
{
    var pos = {
        lat: Lat,
        lng: Lng
    };
    
    map.setCenter(pos);
}
function RefreshMap()
{
    map.refresh();
}
function SetMarkerMain(latBase, lngBase, msg)
{
    var myLatLng = { lat: latBase, lng: lngBase};


    var marker = new google.maps.Marker({
        position: myLatLng,
        map: map
        //title: 'Hello World!'
    });

}

    </script>
    <div id="LoginPage">
        <img src="images/HookNLineLogo.png" />
        <br />
            <label>User name</label>
            <br />
            <input id="UserNameEntry" type="text" name="usr" placeholder="username">
            <br />
            <label>Password</label>
            <br />
            <input id="PassWrdEntry" type="password" name="pword" placeholder="password">
            <br />
            <input type="button" value="Login" onclick="LoginMain();" />
            <br />            
            <input type="button" value="Reset Password" onclick="ResetPassword();" />
        
    </div>
    <div id="map" hidden="true"></div>
    <div id="SelectPoint">

    </div>
    <!--<div id="SearchableMenu" class="login-card" hidden="true">-->
        <div id="SearchableMenu" hidden="true">
            <div id="w">
                <div id="content">
                    <label class="LabelClass">Select a Point V7</label>
                    <div id="searchfield">
                    <form>
                        <input type="text" name="currency" class="biginput" id="autocomplete">
                    </form>
                        <br />
                    </div>
                <!-- @end #searchfield -->
                    <input type="button" id="SubmitPoint" onclick="PickAPoint();" value="Submit" />
                    <input type="button" id="CancelPoint" onclick="CancelButton();" value="Cancel" />

                    <div hidden ="true" id="outputbox">
                        <p id="outputcontent">Choose a point and the results will display here.</p>
                        <label hidden="true" id="WayPointLabel"></label>
                        <label hidden="true" id="LatitudeLabel"></label>
                        <label hidden="true" id="LongitudeLabel"></label>

                    </div>

                </div><!-- @end #content -->
            </div><!-- @end #w -->
        </div>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBsFW2qz_e9OYYsTVQok9ZakQuTMEIxovU&callback=initMap"
              async defer></script>
</body>
</html>